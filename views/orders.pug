extends ./layout.pug  

block styles 
    link(rel="stylesheet", href="/css/bookings.css")

block contents 
    section.all-operational-bookings 
        section.bookings-table 
            if orders.length < 1
                .nothing-action 
                    h1 No orders yet. Start to order now
                    a(href="/books").add-btn-action Go to Books
            
            else
                h3 All Orders
                table
                    thead
                        tr  
                            td OrderId 
                            td Book name
                            td Author 
                            td ISBN id
                            td Published date 
                            td Get invoice
                            td Cancel order
                    tbody
                        each order in orders
                            tr
                                td #{order.orderId}
                                td #{order.book.name}
                                td #{order.book.author}
                                td #{order.book.ISBN}
                                td #{order.book.publishedDate}
                            
                                td.order-column
                                    if order.orderId
                                        if !order.orderFileUrl
                                            form(action="/books/orders/get-booking-invoice" method="POST")
                                                input(type="hidden" name="_csrf" value=(csrfToken))
                                                input(type="text" value=(order.orderId) name="orderId").id-element
                                                input(type="submit" value="Get invoice").submit-btn 
                                        else
                                            form
                                                a(href=(order.orderFileUrl)).submit-btn Invoice link  
                                td.delete-column 
                                    form(action="/books/orders/delete-order" method="POST")
                                        input(type="hidden" name="_csrf" value=(csrfToken))
                                        input(type="text" value=(order.orderId) name="orderId").id-element
                                        input(type="submit" value="Cancel order").submit-btn 